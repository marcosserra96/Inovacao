/* ===============================
   ENERGISA THEME — moderno (V2)
   =============================== */

:root{
  --teal:#009BC1; --green:#59C085; --ink:#0a4561; --dark:#0f3f53;
  --bg:#F4F8FA; --card:#FFFFFF; --muted:#5E7D8C; --stroke:rgba(2,34,46,.08);
  --safe: env(safe-area-inset);
}

/* Anti-zoom iOS e conforto mobile */
html { -webkit-text-size-adjust: 100%; }
html,body{ margin:0; background:var(--bg); color:var(--ink);
  font-family:"Segoe UI", Inter, system-ui, -apple-system, Arial, sans-serif;
  overscroll-behavior-y: contain; /* reduz pull-to-refresh acidental */
}
*{ box-sizing:border-box; }
input, select, textarea, button { font-size:16px; } /* evita zoom no foco */
button, a { touch-action: manipulation; } /* evita double-tap-zoom */

body { padding: max(0px, env(safe-area-inset-top)) 0 max(0px, env(safe-area-inset-bottom)) 0; }

/* ======= Topbar ======= */
.header{
  max-width:1120px; margin:18px auto 10px; padding:0 16px;
  display:flex; align-items:center; justify-content:space-between;
}
.brand{ display:flex; align-items:center; gap:10px; }
.logo-dot{
  width:18px; height:18px; border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #fff, var(--teal) 60%);
  box-shadow:0 3px 10px rgba(0,0,0,.12);
}
/* Logo JPEG personalizada */
.logo-img{
  height:36px; width:auto; display:block; border-radius:6px; /* opcional */
}
.title{ font-weight:900; font-size:24px; }
.badge{ background:var(--dark); color:#fff; padding:8px 12px; border-radius:999px; font-weight:800; }

/* ======= Card ======= */
.card{
  max-width:1120px; margin:0 auto 28px; background:var(--card);
  border:1px solid var(--stroke); border-radius:28px;
  box-shadow:0 10px 24px rgba(0,0,0,.06);
  margin-left: max(16px, env(safe-area-inset-left));
  margin-right: max(16px, env(safe-area-inset-right));
}

/* ======= Home ======= */
.grid-home{ display:grid; grid-template-columns:1.05fr .95fr; }
@media(max-width:992px){ .grid-home{ grid-template-columns:1fr; } }

.hero{
  padding:40px 32px;
  border-radius:28px 0 0 28px;
  background:linear-gradient(135deg, var(--teal), var(--green));
  color:#fff;
}
@media(max-width:992px){ .hero{ border-radius:28px 28px 0 0; } }

.hero h1{ margin:0 0 6px; font-size:42px; line-height:1.05; font-weight:900; }
.hero p{ margin:0 0 18px; font-size:16px; opacity:.95; }

.form{ display:grid; gap:12px; max-width:560px; }
.input{
  width:100%; padding:14px 16px; border:none; outline:none; border-radius:16px;
  background:#fff; color:#0a2e40; font-weight:600; box-shadow:0 6px 16px rgba(0,0,0,.12);
}
.btn{ border:none; cursor:pointer; font-weight:900; min-height:48px; }
.btn-pill{ border-radius:999px; padding:14px 20px; }
.btn-primary{
  background:linear-gradient(90deg,var(--dark),#0b3a4f); color:#fff;
  box-shadow:0 10px 20px rgba(0,0,0,.18);
  transition:transform .08s ease, filter .2s ease;
}
.btn-primary:hover{ transform:translateY(-1px); filter:brightness(1.04); }

/* ======= Autocomplete ======= */
.autocomplete{ position:relative; }
.typeahead{
  position:absolute; top:calc(100% + 6px); left:0; right:0; z-index:50;
  list-style:none; margin:0; padding:6px;
  max-height:240px; overflow:auto;
  background:#0b2f39; color:#e7f6fb;
  border:1px solid rgba(255,255,255,.08);
  border-radius:12px;
  box-shadow:0 14px 28px rgba(0,0,0,.18), 0 10px 10px rgba(0,0,0,.12);
  display:none;
}
.typeahead li{
  display:flex; justify-content:space-between; align-items:center;
  gap:10px; padding:10px 12px; cursor:pointer; border-radius:10px;
}
.typeahead li .n{ font-weight:700; color:#e7f6fb; }
.typeahead li .hint{ font-size:.85rem; opacity:.75; color:#cde7ef; }
.typeahead li:hover, .typeahead li.active{ background:rgba(255,255,255,.06); }

/* Garante que nada corte o dropdown */
.card, .form, .hero { overflow: visible; }

/* ======= Ranking ======= */
.side{ padding:28px; background:#fff; border-left:1px solid var(--stroke); }
@media(max-width:992px){ .side{ border-left:none; border-top:1px solid var(--stroke); } }
.side h2{ margin:0 0 12px; font-size:22px; font-weight:900; }

.table{ width:100%; border-collapse:separate; border-spacing:0 10px; }
.table th{ text-align:left; font-size:13px; color:#507286; }
.table td{
  background:#fff; padding:12px 10px; border-radius:12px; box-shadow:0 1px 4px rgba(0,0,0,.05);
}
.table tr:hover td{ background:#f3f9fc; }
.muted{ color:var(--muted); font-size:13px; }

/* destaque do próprio jogador */
.me td{ outline:3px solid rgba(0,155,193,.25); background:#eef8fb; }

/* medals */
#ranking-rows tr:nth-child(1) td:first-child{ color:#d4af37; font-weight:900; }
#ranking-rows tr:nth-child(2) td:first-child{ color:#a9b2bd; font-weight:900; }
#ranking-rows tr:nth-child(3) td:first-child{ color:#cd7f32; font-weight:900; }

/* skeleton */
.skel{ animation:s 1.2s infinite linear; background:linear-gradient(90deg,#eef3f6 25%,#f6fafc 37%,#eef3f6 63%); background-size:400% 100%; height:40px; border-radius:12px; }
@keyframes s{0%{background-position:100% 0}100%{background-position:0 0}}

/* ======= Quiz ======= */
.quiz-wrap{ padding:24px 28px 32px; }
.topbar{ display:grid; grid-template-columns:auto 1fr auto; gap:12px; align-items:center; }
.pill{ background:var(--dark); color:#fff; padding:8px 12px; border-radius:999px; font-weight:800; }
.progress{ height:12px; background:#deedf3; border:1px solid var(--stroke); border-radius:999px; overflow:hidden; }
.progress .bar{ height:100%; width:0; background:linear-gradient(90deg,var(--teal),var(--green)); transition:width .25s ease; }
.timer{ font-weight:900; color:var(--dark); }
.q-title{ margin:10px 0 14px; font-size:28px; font-weight:900; }
#q-options{ display:flex; flex-direction:column; gap:14px; }
.option{
  padding:16px 20px; border:none; border-radius:22px; cursor:pointer; min-height:48px;
  background:linear-gradient(135deg,var(--teal),var(--green)); color:#052531; font-weight:900;
  text-align:left; display:flex; align-items:center; gap:14px; box-shadow:0 8px 16px rgba(0,0,0,.08);
  -webkit-user-select: none; user-select: none;
}
.option .bullet{ width:48px; height:48px; border-radius:14px; display:grid; place-items:center; background:var(--dark); color:#fff; }
.option:hover{ transform:translateY(-1px); }
.option:active{
  transform: translateY(0);
  filter: brightness(0.98);
  box-shadow: 0 4px 12px rgba(0,0,0,.06);
}
.option:disabled{ opacity:.92; cursor:default; }
.option.success{ outline:3px solid #2ecc71; }
.option.danger { outline:3px solid #ff6b6b; }

/* ======= Intersticial (Kahoot-like) ======= */
.inter-wrap{
  position: fixed; inset: 0; z-index: 999;
  display: none; /* hidden por padrão */
  align-items: center; justify-content: center;
  background: rgba(10, 30, 40, .65);
  backdrop-filter: blur(4px);
}
.inter-wrap.show{ display: flex; }

.inter-card{
  width: min(520px, 92vw);
  background: #0b2f39; color: #e7f6fb;
  border-radius: 22px; padding: 28px 24px;
  border: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 20px 60px rgba(0,0,0,.45);
  text-align: center;
  animation: inter-pop .38s ease-out both;
}
.inter-title{ margin: 0 0 10px; font-size: 24px; font-weight: 900; letter-spacing: .5px; }
.inter-sub{ margin: 10px 0 0; opacity: .85; }

.inter-count{
  margin: 4px auto; width: 140px; height: 140px; border-radius: 50%;
  display: grid; place-items: center;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.1), rgba(255,255,255,.03) 60%);
  border: 2px solid rgba(255,255,255,.12);
  box-shadow: inset 0 0 0 6px rgba(255,255,255,.05), 0 10px 30px rgba(0,0,0,.25);
}
.inter-count span{
  font-size: 64px; font-weight: 900; line-height: 1;
  animation: inter-pulse 1s ease-in-out infinite;
}

@keyframes inter-pop{
  0%{ transform: translateY(10px) scale(.96); opacity: 0; }
  100%{ transform: translateY(0) scale(1); opacity: 1; }
}
@keyframes inter-pulse{
  0%,100%{ transform: scale(1); }
  50%{ transform: scale(1.08); }
}

/* ======= Placar TV ======= */
.full{ max-width:1280px; margin:28px auto; }
.board{ padding:24px; border-radius:24px; background:#fff; border:1px solid var(--stroke); box-shadow:0 10px 24px rgba(0,0,0,.06); }
.board h1{ margin:0 0 12px; font-size:32px; font-weight:900; }
.board .table td{ font-size:20px; padding:14px 12px; }
.qr{ display:flex; align-items:center; gap:12px; margin-top:10px; }
.qr img{ width:96px; height:96px; border-radius:12px; border:1px solid var(--stroke); }

/* ===== A11y foco visível & motion safe ===== */
.btn:focus-visible, .input:focus-visible, .option:focus-visible, .typeahead li:focus-visible {
  outline: 3px solid rgba(0,155,193,.55);
  outline-offset: 2px;
}
@media (prefers-reduced-motion: reduce){
  * { animation: none !important; transition: none !important; }
}
/* ===== Tempo Esgotado (overlay + animação) ===== */
.timeup-wrap{
  position: fixed; inset: 0; z-index: 1000;
  display: none; align-items: center; justify-content: center;
  background: rgba(120, 0, 0, 0.18);
  backdrop-filter: blur(2px);
}
.timeup-wrap.show{ display: flex; }

.timeup-pulse{
  background: linear-gradient(135deg, #ff6b6b, #ff3b3b);
  color: #fff; padding: 14px 18px; border-radius: 999px; font-weight: 900;
  border: 2px solid rgba(255,255,255,.6);
  box-shadow: 0 10px 30px rgba(255, 0, 0, .35);
  animation: timeup-pop .28s ease-out, timeup-breath 1.2s ease-in-out infinite;
}

@keyframes timeup-pop{
  0%{ transform: scale(.9); opacity: 0; }
  100%{ transform: scale(1); opacity: 1; }
}
@keyframes timeup-breath{
  0%,100%{ transform: scale(1); }
  50%{ transform: scale(1.05); }
}

/* Shake sutil no card do quiz */
.quiz-wrap.shake{
  animation: quiz-shake .38s cubic-bezier(.36,.07,.19,.97) both;
}
@keyframes quiz-shake{
  10%, 90% { transform: translateX(-1px); }
  20%, 80% { transform: translateX(2px); }
  30%, 50%, 70% { transform: translateX(-4px); }
  40%, 60% { transform: translateX(4px); }
}

/* respeita motion */
@media (prefers-reduced-motion: reduce){
  .timeup-pulse, .quiz-wrap.shake { animation: none !important; }
}

